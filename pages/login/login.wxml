<!-- pages/login/login.wxml -->
<view class="login-container">
  <!-- Logo区域 -->
  <view class="logo-section">
    <view class="logo">🏖️</view>
    <view class="app-name">老友行</view>
    <view class="app-slogan">专注中老年旅游服务</view>
  </view>

  <!-- 登录表单 -->
  <view class="login-form">
    <!-- 用户类型选择 -->
    <view class="role-selector">
      <view class="role-label">选择身份</view>
      <view class="role-tabs">
        <view wx:for="{{roles}}" wx:key="value"
              class="role-tab {{selectedRole === item.value ? 'active' : ''}}"
              bind:tap="selectRole"
              data-role="{{item.value}}">
          <text class="role-icon">{{item.icon}}</text>
          <text class="role-name">{{item.name}}</text>
        </view>
      </view>
    </view>

    <!-- 手机号输入 -->
    <view class="form-item">
      <view class="form-label">📱 手机号</view>
      <view class="input-wrapper">
        <input class="form-input" 
               type="number" 
               placeholder="请输入手机号" 
               value="{{phone}}"
               maxlength="11"
               bindinput="onPhoneInput" />
      </view>
    </view>

    <!-- 密码输入 -->
    <view class="form-item">
      <view class="form-label">🔒 密码</view>
      <view class="input-wrapper">
        <input class="form-input" 
               password="{{!showPassword}}"
               placeholder="请输入密码" 
               value="{{password}}"
               bindinput="onPasswordInput" />
        <view class="password-toggle" bind:tap="togglePassword">
          <text>{{showPassword ? '👁️' : '👁️‍🗨️'}}</text>
        </view>
      </view>
    </view>

    <!-- 忘记密码 -->
    <view class="form-footer">
      <view class="remember-me">
        <checkbox-group bindchange="onRememberChange">
          <label class="remember-label">
            <checkbox value="remember" checked="{{rememberMe}}" color="#1677ff"/>
            <text>记住密码</text>
          </label>
        </checkbox-group>
      </view>
      <view class="forgot-password" bind:tap="forgotPassword">
        忘记密码？
      </view>
    </view>

    <!-- 登录按钮 -->
    <button class="login-btn" bind:tap="handleLogin">
      登 录
    </button>

    <!-- 快速登录（仅子女和父母角色） -->
    <view wx:if="{{selectedRole === 'child' || selectedRole === 'parent'}}" class="quick-login">
      <view class="divider">
        <text class="divider-text">或</text>
      </view>
      <button class="wechat-login-btn" open-type="getUserInfo" bindgetuserinfo="wechatLogin">
        <text class="wechat-icon">💬</text>
        微信快捷登录
      </button>
    </view>

    <!-- 注册提示 -->
    <view wx:if="{{selectedRole === 'child' || selectedRole === 'parent'}}" class="register-hint">
      <text>还没有账号？</text>
      <text class="register-link" bind:tap="goToRegister">立即注册</text>
    </view>
  </view>

  <!-- 测试账号提示（开发环境） -->
  <view class="test-accounts">
    <view class="test-title">测试账号</view>
    <view class="test-item" bind:tap="fillTestAccount" data-role="child">
      子女：13800000001 / 123456
    </view>
    <view class="test-item" bind:tap="fillTestAccount" data-role="parent">
      父母：13800000002 / 123456
    </view>
    <view class="test-item" bind:tap="fillTestAccount" data-role="agency">
      旅行社：13800000003 / 123456
    </view>
    <view class="test-item" bind:tap="fillTestAccount" data-role="guide">
      导游：13800000004 / 123456
    </view>
  </view>
</view>
