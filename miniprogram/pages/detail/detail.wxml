<!-- pages/detail/detail.wxml -->
<view class="container" wx:if="{{product}}">
  <!-- äº§å“å›¾ç‰‡ -->
  <image class="detail-banner" src="{{product.imageUrl}}" mode="aspectFill" />

  <!-- äº§å“æ ‡é¢˜å’Œä»·æ ¼ -->
  <view class="detail-title-section">
    <view class="detail-title">{{product.title}}</view>
    <view class="detail-desc">{{product.description}}</view>
    <view class="detail-price">
      <text class="price-text">Â¥{{product.price}}</text>
      <text class="price-unit">/äººèµ·</text>
    </view>
  </view>

  <!-- å…³é”®ä¿¡æ¯å¡ç‰‡ -->
  <view class="info-card highlight-card">
    <view class="card-title">ğŸ¯ å…³é”®ä¿¡æ¯</view>
    <view class="info-grid">
      <view class="info-item">
        <view class="info-label">é€‚åˆå¹´é¾„</view>
        <view class="info-value highlight">{{product.ageRange}}</view>
      </view>
      <view class="info-item">
        <view class="info-label">ä½“åŠ›å¼ºåº¦</view>
        <view class="info-value highlight" style="color: {{intensityColor}};">
          {{product.intensity}}
        </view>
      </view>
      <view class="info-item">
        <view class="info-label">è¡Œç¨‹å¤©æ•°</view>
        <view class="info-value">{{product.duration}}</view>
      </view>
      <view class="info-item">
        <view class="info-label">å›¢é˜Ÿè§„æ¨¡</view>
        <view class="info-value">{{product.groupSize}}</view>
      </view>
    </view>
    <view class="intensity-desc">
      ğŸ’¡ {{intensityDesc}}
    </view>
  </view>

  <!-- åŒ»ç–—ä¿éšœ -->
  <view class="info-card">
    <view class="card-title">âš•ï¸ åŒ»ç–—ä¿éšœ</view>
    <view class="medical-info">
      <view wx:if="{{product.medicalSupport.hasDoctor}}" class="medical-item">
        <text class="check-icon">âœ…</text>
        <text class="medical-text">éšé˜ŸåŒ»æŠ¤äººå‘˜</text>
      </view>
      <view class="medical-item">
        <text class="label-text">æ€¥æ•‘æªæ–½ï¼š</text>
        <text class="value-text">{{product.medicalSupport.emergencyMeasures}}</text>
      </view>
      <view class="medical-item">
        <text class="label-text">é™„è¿‘åŒ»é™¢ï¼š</text>
        <text class="value-text">{{product.medicalSupport.nearbyHospitals}}</text>
      </view>
    </view>
  </view>

  <!-- äº¤é€šå®‰æ’ -->
  <view class="info-card">
    <view class="card-title">ğŸšŒ äº¤é€šå®‰æ’</view>
    <view class="transport-info">
      <view class="transport-item">
        <text class="label-text">è½¦è¾†ç±»å‹ï¼š</text>
        <text class="value-text bold">{{product.transportation.type}}</text>
      </view>
      <view class="transport-item">
        <text class="label-text">åº§ä½å®‰æ’ï¼š</text>
        <text class="value-text">{{product.transportation.seatArrangement}}</text>
      </view>
      <view class="transport-features">
        <view wx:for="{{product.transportation.features}}" wx:key="*this" class="feature-tag">
          {{item}}
        </view>
      </view>
    </view>
  </view>

  <!-- è¡Œç¨‹äº®ç‚¹ -->
  <view class="info-card">
    <view class="card-title">âœ¨ è¡Œç¨‹äº®ç‚¹</view>
    <view class="highlights-list">
      <view wx:for="{{product.highlights}}" wx:key="*this" class="highlight-item">
        <text class="highlight-bullet">â€¢</text>
        <text class="highlight-text">{{item}}</text>
      </view>
    </view>
  </view>

  <!-- è¯¦ç»†è¡Œç¨‹ -->
  <view class="info-card">
    <view class="card-title">ğŸ“… è¯¦ç»†è¡Œç¨‹</view>
    <view class="itinerary-timeline">
      <view wx:for="{{product.itinerary}}" wx:key="time" class="timeline-item">
        <view class="timeline-time">{{item.time}}</view>
        <view class="timeline-dot"></view>
        <view class="timeline-content">
          <view class="timeline-location">{{item.location}}</view>
          <view class="timeline-activity">{{item.activity}}</view>
        </view>
      </view>
    </view>
  </view>

  <!-- äº§å“æ ‡ç­¾ -->
  <view class="info-card">
    <view class="card-title">ğŸ·ï¸ äº§å“ç‰¹è‰²</view>
    <view class="tags-container">
      <view wx:for="{{product.tags}}" wx:key="*this" class="product-tag">
        {{item}}
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨é¢„è®¢æŒ‰é’® -->
  <view class="detail-footer">
    <view class="footer-price">
      <text class="footer-price-value">Â¥{{product.price}}</text>
      <text class="footer-price-unit">/äºº</text>
    </view>
    <button class="book-btn" bind:tap="goToBooking">ç«‹å³é¢„è®¢</button>
  </view>

  <!-- å®¢æœç»„ä»¶ -->
  <customer-service />
</view>
